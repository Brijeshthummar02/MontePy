variables:
  PYTHON_VER: "3.8"

.install:
  script:
    - if [[ -d dist ]]; then rm -r dist ; fi; 
    - if [[ `conda env list` = "*experiment_analysis_mcnpy*" ]]; then
    - else
    - conda env create -n experiment_analysis_mcnpy
    - fi
    - echo "Installing dependencies"
    - which python
    - which pip
    - pip install -r requirements/dev.txt
    - pip uninstall -y montepy
    - python -m build --sdist --wheel
    - pip install . 
    - pip uninstall -y montepy
    - pip install --user dist/*.whl 
      # test the extras installation
    - pip install --user montepy[test]
    - pip install --user montepy[doc]
    - pip freeze
